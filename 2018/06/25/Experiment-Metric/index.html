<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Experiment," />










<meta name="description" content="箱线图箱线图（Boxplot）也称箱须图（Box-whisker Plot），可以用于异常值检测。它是用一组数据中的最小值、第一四分位数、中位数、第三四分位数和最大值来反映数据分布的中心位置和散布范围，可以粗略地看出数据是否具有对称性。通过将多组数据的箱线图画在同一坐标上，则可以清晰地显示各组数据的分布差异，为发现问题、改进流程提供线索。  四分位数所谓四分位数，就是把组中所有数据由小到大排列并分">
<meta name="keywords" content="Experiment">
<meta property="og:type" content="article">
<meta property="og:title" content="Experiment-Metric">
<meta property="og:url" content="http://yoursite.com/2018/06/25/Experiment-Metric/index.html">
<meta property="og:site_name" content="Blog of Qing">
<meta property="og:description" content="箱线图箱线图（Boxplot）也称箱须图（Box-whisker Plot），可以用于异常值检测。它是用一组数据中的最小值、第一四分位数、中位数、第三四分位数和最大值来反映数据分布的中心位置和散布范围，可以粗略地看出数据是否具有对称性。通过将多组数据的箱线图画在同一坐标上，则可以清晰地显示各组数据的分布差异，为发现问题、改进流程提供线索。  四分位数所谓四分位数，就是把组中所有数据由小到大排列并分">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/2009624114634640.JPG">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/Screen%20Shot%202018-07-16%20at%209.10.11%20PM.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/Screen%20Shot%202018-07-16%20at%209.11.04%20PM.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/Screen%20Shot%202019-08-06%20at%209.01.39%20PM.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_OpSYGh2-XE6aE3sVAJAHrw.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_uR09zTlPgIj5PvMYJZScVg.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_HxNvqTl-Pd63niUIbrD4pg.jpeg">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_qLjMtrdG3qIcuNBALvsYQA.jpeg">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_Bwhr9ots47akHbrgssKXrA.jpeg">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_aLUZ01GaLPwGDI24jb-uUA.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_mPEFI9HFEF7GKH5HYQRDzA.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_ceB9hobuBUjnPpRKedA-VA.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_4Ar_wBQ_xWrFUqwwQGV-8A.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_QqZzGJwzYxnHWZ_axq6ynA.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_AgDJbm6d8qr8ESHNv6VvKg.png">
<meta property="og:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/1_KNhNw8BsjbIETPF_BH8Qpg.png">
<meta property="og:updated_time" content="2019-08-07T02:26:27.221Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Experiment-Metric">
<meta name="twitter:description" content="箱线图箱线图（Boxplot）也称箱须图（Box-whisker Plot），可以用于异常值检测。它是用一组数据中的最小值、第一四分位数、中位数、第三四分位数和最大值来反映数据分布的中心位置和散布范围，可以粗略地看出数据是否具有对称性。通过将多组数据的箱线图画在同一坐标上，则可以清晰地显示各组数据的分布差异，为发现问题、改进流程提供线索。  四分位数所谓四分位数，就是把组中所有数据由小到大排列并分">
<meta name="twitter:image" content="http://yoursite.com/2018/06/25/Experiment-Metric/2009624114634640.JPG">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/06/25/Experiment-Metric/"/>





  <title>Experiment-Metric | Blog of Qing</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Blog of Qing</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/25/Experiment-Metric/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qing Wong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog of Qing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Experiment-Metric</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-25T12:29:24-05:00">
                2018-06-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Experiment/" itemprop="url" rel="index">
                    <span itemprop="name">Experiment</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="箱线图"><a href="#箱线图" class="headerlink" title="箱线图"></a><a href="https://blog.csdn.net/zhanghongju/article/details/18446131" target="_blank" rel="noopener">箱线图</a></h2><p>箱线图（Boxplot）也称箱须图（Box-whisker Plot），可以用于异常值检测。它是用一组数据中的最小值、第一四分位数、中位数、第三四分位数和最大值来反映数据分布的中心位置和散布范围，可以粗略地看出数据是否具有对称性。通过将多组数据的箱线图画在同一坐标上，则可以清晰地显示各组数据的分布差异，为发现问题、改进流程提供线索。</p>
<p><img src="/2018/06/25/Experiment-Metric/2009624114634640.JPG" alt="2009624114634640"></p>
<h3 id="四分位数"><a href="#四分位数" class="headerlink" title="四分位数"></a>四分位数</h3><p>所谓四分位数，就是把组中所有数据由小到大排列并分成四等份，处于三个分割点位置的数字就是四分位数。</p>
<ul>
<li>第一四分位数（Q1），又称“较小四分位数”或“下四分位数”，等于该样本中所有数值由小到大排列后第25%的数字。</li>
<li>第二四分位数（Q2），又称“中位数”，等于该样本中所有数值由小到大排列后第50%的数字。</li>
<li>第三四分位数（Q3），又称“较大四分位数”或“上四分位数”，等于该样本中所有数值由小到大排列后第75%的数字。</li>
<li>第三四分位数与第一四分位数的差距又称四分位间距（InterQuartile Range，IQR）。</li>
</ul>
<h4 id="四分位数计算"><a href="#四分位数计算" class="headerlink" title="四分位数计算"></a>四分位数计算</h4><ol>
<li><p>确定Q1、Q2、Q3的位置（n表示数字的总个数）</p>
<ul>
<li>Q1的位置=（n+1）/4</li>
<li>Q2的位置=（n+1）/2</li>
<li>Q3的位置=3（n+1）/4</li>
</ul>
<p>对于数字个数为奇数的，其四分位数比较容易确定。例如，数字“5、47、48、15、42、41、7、39、45、40、35”共有11项，由小到大排列的结果为“5、7、15、35、39、40、41、42、45、47、48”，计算结果如下：</p>
<ul>
<li>Q1的位置=（11+1）/4=3，该位置的数字是15。</li>
<li>Q2的位置=（11+1）/2=6，该位置的数字是40。</li>
<li>Q3的位置=3（11+1）/4=9，该位置的数字是45。</li>
</ul>
<p>而对于数字个数为偶数的，其四分位数确定起来稍微繁琐一点。例如，数字“8、17、38、39、42、44”共有6项，位置计算结果如下：</p>
<ul>
<li>Q1的位置=（6+1）/4=1.75</li>
<li>Q2的位置=（6+1）/2=3.5</li>
<li>Q3的位置=3（6+1）/4=5.25</li>
</ul>
<p>这时的数字以数据连续为前提，由所确定位置的前后两个数字共同确定。例如，Q2的位置为3.5，则由第3个数字38和第4个数字39共同确定，计算方法是：38+（39-38）×3.5的小数部分，即38+1×0.5=38.5。该结果实际上是38和39的平均数。</p>
<p>同理，Q1、Q3的计算结果如下：</p>
<ul>
<li>Q1 = 8+（17-8）×0.75=14.75</li>
<li>Q3 = 42+（44-42）×0.25=42.5</li>
</ul>
</li>
</ol>
<h2 id="MAE-vs-MSE"><a href="#MAE-vs-MSE" class="headerlink" title="MAE vs MSE"></a>MAE vs MSE</h2><p><a href="https://medium.com/human-in-a-machine-world/mae-and-rmse-which-metric-is-better-e60ac3bde13d" target="_blank" rel="noopener">ref1</a></p>
<h3 id="MAE-Mean-Absolute-Error"><a href="#MAE-Mean-Absolute-Error" class="headerlink" title="MAE(Mean Absolute Error)"></a>MAE(Mean Absolute Error)</h3><p><img src="/2018/06/25/Experiment-Metric/Screen Shot 2018-07-16 at 9.10.11 PM.png" alt="Screen Shot 2018-07-16 at 9.10.11 PM"></p>
<h3 id="MSE-Mean-Squared-Error"><a href="#MSE-Mean-Squared-Error" class="headerlink" title="MSE(Mean Squared Error)"></a>MSE(Mean Squared Error)</h3><p><img src="/2018/06/25/Experiment-Metric/Screen Shot 2018-07-16 at 9.11.04 PM.png" alt="Screen Shot 2018-07-16 at 9.11.04 PM"></p>
<h3 id="Comparison"><a href="#Comparison" class="headerlink" title="Comparison"></a>Comparison</h3><ol>
<li><p>They are both used in crowd counting as evaluation metric.</p>
</li>
<li><p>Roughly speaking, MAE indicates the accuracy of the estimates, and MSE indicates the robustness of the estimates.</p>
<blockquote>
<p>This is because for mse, the errors are squared before they are averaged, the MSE gives a relatively high weight to large errors. This means the RMSE should be more useful when large errors are particularly undesirable.</p>
</blockquote>
</li>
<li></li>
</ol>
<h2 id="Confusion-Matrix"><a href="#Confusion-Matrix" class="headerlink" title="Confusion Matrix"></a>Confusion Matrix</h2><p>A confusion matrix is a technique used for summarizing the performance of a classification algorithm i.e. it has binary outputs. Example for a classification algorithm: Predicting if the patient has cancer. Here, there can only be two outputs i.e. Yes or No.</p>
<p>A confusion matrix gives us a better idea of what our classification model is predicting right and what types of errors it is making.</p>
<p>Below is what an Confusion Matrix looks like:</p>
<p><img src="/2018/06/25/Experiment-Metric/Screen Shot 2019-08-06 at 9.01.39 PM.png" alt="creen Shot 2019-08-06 at 9.01.39 P"></p>
<p><strong>True Positive:</strong> You predicted positive and your are right.</p>
<p><strong>True Negative:</strong> You predicted negative and your are right.</p>
<p><strong>False Positive: (Type 1 Error):</strong> You predicted positive and you are wrong.</p>
<p><strong>False Negative: (Type 2 Error): </strong>You predicted negative and you are wrong.</p>
<p><img src="/2018/06/25/Experiment-Metric/1_OpSYGh2-XE6aE3sVAJAHrw.png" alt="_OpSYGh2-XE6aE3sVAJAHr"></p>
<p><img src="/2018/06/25/Experiment-Metric/1_uR09zTlPgIj5PvMYJZScVg.png" alt="_uR09zTlPgIj5PvMYJZScV"></p>
<p><strong>Recall</strong></p>
<script type="math/tex; mode=display">
\operatorname{Recall}=\frac{\mathrm{TP}}{\mathrm{TP}+\mathrm{FN}}</script><p><strong>Precision</strong></p>
<script type="math/tex; mode=display">
\text { Precision }=\frac{\mathrm{TP}}{\mathrm{TP}+\mathrm{FP}}</script><p><strong>F-measure</strong></p>
<script type="math/tex; mode=display">
F-\text {measure}=\frac{2 * \text { Recall * Precision }}{\text { Recall }+\text { Precision }}</script><p>accuracy常用于分类，比对两个向量，一个是真实向量，一个是预测向量，预测正确加1，最终sum除以向量长度就是准确率。</p>
<p>精确率(precision)的公式是katex is not defined,它计算的是所有”正确被检索的item(TP)”占所有”实际被检索到的(TP+FP)”的比例.（在所有找对找错里面，找对的概率）</p>
<p>召回率(recall)的公式是katex is not defined,它计算的是所有”正确被检索的item(TP)”占所有”应该检索到的item(TP+FN)”的比例。（找到正确的，能覆盖目标的所有的概率）</p>
<p>假如某个班级有男生80人,女生20人,共计100人.目标是找出所有女生. 现在某人挑选出50个人,其中20人是女生,另外还错误的把30个男生也当作女生挑选出来了. 作为评估者的你需要来评估(evaluation)下他的工作。</p>
<ul>
<li>很容易，我们可以得到:他把其中70(20女+50男)人判定正确了,而总人数是100人，所以它的accuracy就是70 %(70 / 100).</li>
<li>在例子中就是希望知道此君得到的所有人中,正确的人(也就是女生)占有的比例.所以其precision也就是40%(20女生/(20女生+30误判为女生的男生)).</li>
<li>在例子中就是希望知道此君得到的女生占本班中所有女生的比例,所以其recall也就是100%(20女生/(20女生+ 0 误判为男生的女生))</li>
</ul>
<h1 id="AUC-ROC-Curve"><a href="#AUC-ROC-Curve" class="headerlink" title="AUC ROC Curve"></a>AUC ROC Curve</h1><h3 id="What-is-ROC"><a href="#What-is-ROC" class="headerlink" title="What is ROC?"></a>What is ROC?</h3><p>ROC (<em>Receiver Operating Characteristic</em>) Curve tells us about how good the model can distinguish between two things (<em>e.g</em> <em>If a patient has a disease or no</em>). Better models can accurately distinguish between the two. Whereas, a poor model will have difficulties in distinguishing between the two.</p>
<p>Let’s assume we have a model which predicts whether the patient has a particular disease or no. The model predicts probabilities for each patient (<em>in python we use the“</em> <strong>predict_proba*</strong>” function*). Using these probabilities, we plot the distribution as shown below:</p>
<p><img src="/2018/06/25/Experiment-Metric/1_HxNvqTl-Pd63niUIbrD4pg.jpeg" alt="_HxNvqTl-Pd63niUIbrD4p"></p>
<p>Here, the red distribution represents all the patients who do not have the disease and the green distribution represents all the patients who have the disease.</p>
<p>Now we got to pick a value where we need to set the cut off i.e. a threshold value, above which we will predict everyone as positive (<em>they have the disease</em>) and below which will predict as negative (<em>they do not have the disease</em>). We will set the threshold at “<strong>0.5</strong>” as shown below:</p>
<p><img src="/2018/06/25/Experiment-Metric/1_qLjMtrdG3qIcuNBALvsYQA.jpeg" alt="_qLjMtrdG3qIcuNBALvsYQ"></p>
<p>All the positive values above the threshold will be “<strong>True Positives</strong>” and the negative values above the threshold will be “<strong>False Positives</strong>” as they are predicted incorrectly as positives.</p>
<p>All the negative values below the threshold will be “<strong>True Negatives</strong>” and the positive values below the threshold will be “<strong>False Negative</strong>” as they are predicted incorrectly as negatives.</p>
<p><img src="/2018/06/25/Experiment-Metric/1_Bwhr9ots47akHbrgssKXrA.jpeg" alt="_Bwhr9ots47akHbrgssKXr"></p>
<p>Here, we have got a basic idea of the model predicting correct and incorrect values with respect to the threshold set. Before we move on, let’s go through two important terms: <strong>Sensitivity and Specificity.</strong></p>
<h3 id="What-is-Sensitivity-and-Specificity"><a href="#What-is-Sensitivity-and-Specificity" class="headerlink" title="What is Sensitivity and Specificity?"></a>What is Sensitivity and Specificity?</h3><p>In simple terms, the proportion of patients that were identified correctly to have the disease (<em>i.e. True Positive</em>) upon the total number of patients who actually have the disease is called as Sensitivity or Recall.</p>
<p><img src="/2018/06/25/Experiment-Metric/1_aLUZ01GaLPwGDI24jb-uUA.png" alt="_aLUZ01GaLPwGDI24jb-uU"></p>
<p>Similarly, the proportion of patients that were identified correctly to not have the disease (<em>i.e. True Negative</em>) upon the total number of patients who do not have the disease is called as Specificity.</p>
<p><img src="/2018/06/25/Experiment-Metric/1_mPEFI9HFEF7GKH5HYQRDzA.png" alt="_mPEFI9HFEF7GKH5HYQRDz"></p>
<h3 id="Trade-off-between-Sensitivity-and-Specificity"><a href="#Trade-off-between-Sensitivity-and-Specificity" class="headerlink" title="Trade-off between Sensitivity and Specificity"></a>Trade-off between Sensitivity and Specificity</h3><p>When we decrease the threshold, we get more positive values thus increasing the sensitivity. Meanwhile, this will decrease the specificity.</p>
<p>Similarly, when we increase the threshold, we get more negative values thus increasing the specificity and decreasing sensitivity.</p>
<p>As <strong>Sensitivity</strong> ⬇️ <strong>Specificity</strong> ⬆️</p>
<p>As <strong>Specificity</strong> ⬇️ <strong>Sensitivity</strong> ⬆️</p>
<p><img src="/2018/06/25/Experiment-Metric/1_ceB9hobuBUjnPpRKedA-VA.png" alt="_ceB9hobuBUjnPpRKedA-V"></p>
<p>But, this is not how we graph the ROC curve. To plot ROC curve, instead of Specificity we use (1 — Specificity) and the graph will look something like this:</p>
<p><img src="/2018/06/25/Experiment-Metric/1_4Ar_wBQ_xWrFUqwwQGV-8A.png" alt="_4Ar_wBQ_xWrFUqwwQGV-8"></p>
<p>So now, when the sensitivity increases, (1 — specificity) will also increase. This curve is known as the ROC curve.</p>
<p><img src="/2018/06/25/Experiment-Metric/1_QqZzGJwzYxnHWZ_axq6ynA.png" alt="_QqZzGJwzYxnHWZ_axq6yn"></p>
<h3 id="Area-Under-the-Curve"><a href="#Area-Under-the-Curve" class="headerlink" title="Area Under the Curve"></a>Area Under the Curve</h3><p>The AUC is the area under the ROC curve. This score gives us a good idea of how well the model performances.</p>
<p>Let’s take a few examples</p>
<p><img src="/2018/06/25/Experiment-Metric/1_AgDJbm6d8qr8ESHNv6VvKg.png" alt="_AgDJbm6d8qr8ESHNv6VvK"></p>
<p><img src="/2018/06/25/Experiment-Metric/1_KNhNw8BsjbIETPF_BH8Qpg.png" alt="_KNhNw8BsjbIETPF_BH8Qp"></p>
<p>As we see, the first model does quite a good job of distinguishing the positive and the negative values. Therefore, there the AUC score is 0.9 as the area under the ROC curve is large.</p>
<p>Whereas, if we see the last model, predictions are completely overlapping each other and we get the AUC score of 0.5. This means that the model is performing poorly and it is predictions are almost random.</p>
<h3 id="Why-do-we-use-1-—-Specificity"><a href="#Why-do-we-use-1-—-Specificity" class="headerlink" title="Why do we use (1 — Specificity)?"></a>Why do we use (1 — Specificity)?</h3><p>Let’s derive what exactly is (1 — Specificity):</p>
<script type="math/tex; mode=display">
\begin{array}{c}{\text { Specificity }=\frac{T N}{T N+F P}} \\ {1-\text {Specificity}=1-\frac{T N}{T N+F P}} \\ {1-\text {Specificity}=\frac{T N+F P-T N}{T N+F P}} \\ {1-\text {Specificity}=\frac{F P}{T N+F P}}\end{array}</script><p>As we see above, Specificity gives us the True Negative Rate and (1 — Specificity) gives us the False Positive Rate.</p>
<p>So the sensitivity can be called as the “<strong>True Positive Rate</strong>” and (1 — Specificity) can be called as the “<strong>False Positive Rate</strong>”.</p>
<p>So now we are just looking at the positives. As we increase the threshold, we decrease the <em>TPR</em> as well as the <em>FPR</em> and when we decrease the threshold, we are increasing the <em>TPR</em> and <em>FPR</em>.</p>
<p>Thus, AUC ROC indicates how well the probabilities from the positive classes are separated from the negative classes.</p>
<p><a href="https://medium.com/@sebastiannorena/some-model-tuning-methods-bfef3e6544f0" target="_blank" rel="noopener">ref1</a> </p>
<p>AOC是衡量一个模型是否有效的参数，比如：我们使用了grid search来暴力寻找最佳的超参数组合，我们就可以使用AOC来比较不同超参数组合模型的效果，从而选择最佳模型的超参数组合。一般将<code>scoring=’roc_auc’</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div>
<div class="line">2</div>
<div class="line">3</div>
<div class="line">4</div>
<div class="line">5</div>
<div class="line">6</div>
<div class="line">7</div>
<div class="line">8</div>
</pre></td><td class="code"><pre><div class="line">rfc = RandomForestClassifier()</div>
<div class="line">param_grid = &#123;<span class="string">'n_estimators'</span>:[<span class="number">70</span>,<span class="number">100</span>,<span class="number">180</span>],<span class="string">'criterion'</span>:[<span class="string">'gini'</span>,<span class="string">'entropy'</span>],<span class="string">'verbose'</span>:[<span class="number">0</span>,<span class="number">4</span>,<span class="number">10</span>],<span class="string">'warm_start'</span>:[<span class="string">'False'</span>,<span class="string">'True'</span>], <span class="string">'random_state'</span>:[<span class="number">42</span>,<span class="number">72</span>,<span class="number">100</span>,<span class="number">200</span>]&#125;</div>
<div class="line">CV_rfc = GridSearchCV(estimator=rfc,param_grid=param_grid, scoring=<span class="string">'roc_auc'</span>, cv= <span class="number">5</span>)</div>
<div class="line">CV_rfc.fit(X, Y)</div>
<div class="line">print(<span class="string">'BEST PARAMETERS:\n'</span>,CV_rfc.best_params_)</div>
<div class="line">print(<span class="string">'BEST SCORE:\n'</span>,CV_rfc.best_score_)</div>
<div class="line"><span class="comment">#&gt;&gt;&gt;BEST PARAMETERS:&#123;'criterion': 'entropy', 'n_estimators': 180, 'random_state': 72, 'verbose': 0, 'warm_start': 'False'&#125;</span></div>
<div class="line"><span class="comment">#&gt;&gt;&gt;BEST SCORE:0.8326181651784338</span></div>
</pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Experiment/" rel="tag"># Experiment</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/20/DP-Recommendation/" rel="next" title="DP-Recommendation">
                <i class="fa fa-chevron-left"></i> DP-Recommendation
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/26/DP-Smart-Metering/" rel="prev" title="DP-Smart Metering">
                DP-Smart Metering <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Qing Wong</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">88</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">23</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">65</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#箱线图"><span class="nav-number">1.</span> <span class="nav-text">箱线图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#四分位数"><span class="nav-number">1.1.</span> <span class="nav-text">四分位数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#四分位数计算"><span class="nav-number">1.1.1.</span> <span class="nav-text">四分位数计算</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MAE-vs-MSE"><span class="nav-number">2.</span> <span class="nav-text">MAE vs MSE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MAE-Mean-Absolute-Error"><span class="nav-number">2.1.</span> <span class="nav-text">MAE(Mean Absolute Error)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MSE-Mean-Squared-Error"><span class="nav-number">2.2.</span> <span class="nav-text">MSE(Mean Squared Error)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Comparison"><span class="nav-number">2.3.</span> <span class="nav-text">Comparison</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Confusion-Matrix"><span class="nav-number">3.</span> <span class="nav-text">Confusion Matrix</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#AUC-ROC-Curve"><span class="nav-number"></span> <span class="nav-text">AUC ROC Curve</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-ROC"><span class="nav-number">0.1.</span> <span class="nav-text">What is ROC?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-Sensitivity-and-Specificity"><span class="nav-number">0.2.</span> <span class="nav-text">What is Sensitivity and Specificity?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Trade-off-between-Sensitivity-and-Specificity"><span class="nav-number">0.3.</span> <span class="nav-text">Trade-off between Sensitivity and Specificity</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Area-Under-the-Curve"><span class="nav-number">0.4.</span> <span class="nav-text">Area Under the Curve</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Why-do-we-use-1-—-Specificity"><span class="nav-number">0.5.</span> <span class="nav-text">Why do we use (1 — Specificity)?</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qing Wong</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
